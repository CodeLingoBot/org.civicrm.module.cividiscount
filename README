A prototype for CMS independent extensions. Porting civievent_discount to this framework

NEEDED

* Fix/check cividiscount_civicrm_buildForm() for both online and offline forms/cases:
  + check multi-step form case well

* Fix/check cividiscount_civicrm_buildAmount() for both online and offline forms/cases:
  + check multi-participant case well

* Check all transaction amounts match amount displayed on forms.

* Fix/check cividiscount_civicrm_postProcess() tracking for all forms/cases:
  + check we have correct participantID, membershipID, contributionID when it's needed for tracking
  + check generic generic contribution cases well

* Enhance UI with an "apply discount" button that updates displayed prices on any forms
  + it would be nice to do this with ajax but isn't worth much effort.

* Fix/check discount tracking tabs.

* Adapt for 4.2 priceset structure.

NICE TO HAVE

* Fix cividiscount_civicrm_pre():
  + When a contact is deleted, we should also delete their tracking info/usage.
  + When removing participant (and additional) from events, also delete their tracking info/usage.

* Create some user documentation
  + Two types of discounts: automatic membership and code-based.
  + Supports discounted memberships, events, pricesets
  + Describe automatic member discounts (use random code never given to public)
  + Show tracking interface

* Fix or remove CDM_BAO_Item::copy(). Currently it's just a copy of CDM_BAO_Item::delete().

* Give some control over the placement of the discount code text field on the form.

FIXED ALREADY

* Generally clean up the code and logic.

* Carefully review discount verification and applicability:
  + fix _get_discounted_event_ids(), _get_discounted_priceset_ids(), _get_discounted_membership_ids() to return events/pricesets/memberships only for active code

* Enhance UI to show which discount code has been applied.

* Fix membership discounts not working from civicrm/contact/view [Submit Credit Card Membership] - CRM-11028.
